<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Bash 基础 - _浅行</title><meta name="Description" content="_浅行"><meta property="og:title" content="Bash 基础" />
<meta property="og:description" content="变量 Bash 变量为弱类型事先不用指定值的类型，Bash 变量默认为全局变量，可以使用 local 关键字定义局部变量 1 2 3 4 5 6 7 8 9 10 11 # 默认为全局变量 s=&#39;this is a" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://liwanggui.com/posts/bash-basice/" />
<meta property="og:image" content="https://liwanggui.com/logo.png"/>
<meta property="article:published_time" content="2021-06-13T18:05:23+08:00" />
<meta property="article:modified_time" content="2021-06-13T18:05:23+08:00" />
<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://liwanggui.com/logo.png"/>

<meta name="twitter:title" content="Bash 基础"/>
<meta name="twitter:description" content="变量 Bash 变量为弱类型事先不用指定值的类型，Bash 变量默认为全局变量，可以使用 local 关键字定义局部变量 1 2 3 4 5 6 7 8 9 10 11 # 默认为全局变量 s=&#39;this is a"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?ec13af2fca712d77df5a8a53053ddaaf";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script><link rel="canonical" href="https://liwanggui.com/posts/bash-basice/" /><link rel="prev" href="https://liwanggui.com/posts/ssh-key/" /><link rel="next" href="https://liwanggui.com/posts/linux-multi-ip/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Bash 基础",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/liwanggui.com\/posts\/bash-basice\/"
        },"genre": "posts","keywords": "bash","wordcount":  2368 ,
        "url": "https:\/\/liwanggui.com\/posts\/bash-basice\/","datePublished": "2021-06-13T18:05:23+08:00","dateModified": "2021-06-13T18:05:23+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "李王贵"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="_浅行"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>_浅行</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="文章列表"> 文章 </a><a class="menu-item" href="/tags/" title="标签云"> 标签 </a><a class="menu-item" href="/categories/" title="分类"> 分类 </a><a class="menu-item" href="/about/index.html" title="关于我"> 关于我 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="_浅行"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span>_浅行</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="文章列表">文章</a><a class="menu-item" href="/tags/" title="标签云">标签</a><a class="menu-item" href="/categories/" title="分类">分类</a><a class="menu-item" href="/about/index.html" title="关于我">关于我</a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Bash 基础</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/about/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>李王贵</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/bash/"><i class="far fa-folder fa-fw"></i>bash</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2021-06-13">2021-06-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2368 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 5 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#变量">变量</a></li>
    <li><a href="#逻辑运算符">逻辑运算符</a></li>
    <li><a href="#比较运算符">比较运算符</a>
      <ul>
        <li><a href="#1数字比较">1.数字比较</a></li>
        <li><a href="#2字符比较">2.字符比较</a></li>
        <li><a href="#3变量检测">3.变量检测</a></li>
        <li><a href="#4文件系统选项">4.文件系统选项</a></li>
      </ul>
    </li>
    <li><a href="#数组">数组</a></li>
    <li><a href="#条件判断语句">条件判断语句</a>
      <ul>
        <li><a href="#1-使用-test-和---进行条件判断">1. 使用 <code>test</code> 和 <code>[ ]</code> 进行条件判断</a></li>
        <li><a href="#2-if-语句条件判断">2. if 语句，条件判断</a></li>
        <li><a href="#3-case-语句">3. case 语句</a></li>
      </ul>
    </li>
    <li><a href="#循环语句">循环语句</a>
      <ul>
        <li><a href="#1-for-循环">1. <code>for</code> 循环</a></li>
        <li><a href="#2-while-循环">2. <code>while</code> 循环</a></li>
        <li><a href="#3-until-循环">3. <code>until</code> 循环</a></li>
        <li><a href="#4-生成连续的数字字母列表序列">4. 生成连续的数字，字母列表（序列）</a></li>
        <li><a href="#5-循环控制语句">5. 循环控制语句</a></li>
      </ul>
    </li>
    <li><a href="#函数">函数</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="变量">变量</h2>
<p>Bash 变量为弱类型事先不用指定值的类型，Bash 变量默认为全局变量，可以使用 <code>local</code> 关键字定义局部变量</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 默认为全局变量</span>
<span class="nv">s</span><span class="o">=</span><span class="s1">&#39;this is a test&#39;</span>

<span class="c1"># 函数中定义局部变量</span>
a<span class="o">()</span> <span class="o">{</span>
    <span class="nb">local</span> <span class="nv">s</span><span class="o">=</span><span class="s1">&#39;s in function a&#39;</span>
    <span class="nb">echo</span> <span class="nv">$a</span>
<span class="o">}</span>

<span class="c1"># 打印变量长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">s</span><span class="si">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>local 关键字只能在函数中使用</p>
</blockquote>
<h2 id="逻辑运算符">逻辑运算符</h2>
<ul>
<li><code>!</code> : 逻辑非; 表达式为 true 则返回 false，否则返回 true;
<ul>
<li>例: <code>[ ! false ]</code> 返回 <code>true</code></li>
</ul>
</li>
<li><code>&amp;&amp;</code>: 逻辑与; 两个表达式都为 true 才返回 true; 等价于 (<code>-a</code>) 表示;
<ul>
<li>例: <code>[ $a -lt 20 -a $b -gt 100 ]</code> 返回 <code>true</code></li>
</ul>
</li>
<li><code>||</code>: 逻辑或; 有一个表达式为 true 则返回 true; 等价于 (<code>-o</code>) 表示;
<ul>
<li>例: <code>[ $a -lt 20 -o $b -gt 100 ]</code> 返回 <code>false</code></li>
</ul>
</li>
</ul>
<p><em>示例</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">which iftop <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&#34;iftop exist&#34;</span>
which iftop <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&#34;iftop does not exist&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="比较运算符">比较运算符</h2>
<h3 id="1数字比较">1.数字比较</h3>
<ul>
<li><code>-gt</code>: 大于</li>
<li><code>-lt</code>: 小于</li>
<li><code>-ge</code>: 大于或等于</li>
<li><code>-le</code>: 小于或等于</li>
<li><code>-ne</code>: 不等于</li>
<li><code>-eq</code>: 等于</li>
</ul>
<h3 id="2字符比较">2.字符比较</h3>
<ul>
<li>[[ <code>$str1</code> = <code>$str2</code> ]]: 判断两个字符串是否相等 （等号前后有空格）</li>
<li>[[ <code>$str1</code> == <code>$str2</code> ]]: 判断两个字符串是否相等，也可以是数字</li>
<li>[[ <code>$str1</code> != <code>$str2</code> ]]: 判断两个字符串是否不相等 <em>检查字符串的字母排序情况，具体如下：</em></li>
<li>[[ <code>$str1</code> &gt; <code>$str2</code> ]]: 如果 str1 的字母排序比 str2 大，则返回 true</li>
<li>[[ <code>$str1</code> &lt; <code>$str2</code> ]]: 如果 str1 的字母排序比 str2 小，则返回 true</li>
</ul>
<h3 id="3变量检测">3.变量检测</h3>
<ul>
<li><code>[[ -z $str1 ]]</code>: 如果字符串长度为 0，则为 true。</li>
<li><code>[[ -n $str1 ]]</code>: 如果字符串长度不为 0，则为 true。</li>
<li><code>[[ $str1 ]]</code>: 检测字符串是否为空，不为空返回 true。</li>
</ul>
<h3 id="4文件系统选项">4.文件系统选项</h3>
<ul>
<li><code>[ -f $var ]</code>: 判断是否为文件</li>
<li><code>[ -x $var ]</code>: 判断文件是否有可执行权限</li>
<li><code>[ -d $var ]</code>: 判断是否为一个目录</li>
<li><code>[ -e $var ]</code>: 判断文件是否存在</li>
<li><code>[ -c $var ]</code>: 判断文件是字符设备 （不知有啥用途）</li>
<li><code>[ -b $var ]</code>: 判断是否为设备文件</li>
<li><code>[ -w $var ]</code>: 判断文件是否有可写权限”w“</li>
<li><code>[ -r $var ]</code>: 判断文件是否有可读权限”r&quot;</li>
<li><code>[ -L $var ]</code>: 判断是否为符号链接</li>
</ul>
<h2 id="数组">数组</h2>
<p>Bash Shell 只支持一维数组（不支持多维数组），初始化时不需要定义数组大小（与 PHP 类似）。</p>
<p>与大部分编程语言类似，数组元素的下标由 0 开始。</p>
<p>Shell 数组用括号来表示，元素用&quot;空格&quot;符号分割开</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">arr</span><span class="o">=(</span><span class="s2">&#34;first&#34;</span> <span class="s2">&#34;second&#34;</span> <span class="s2">&#34;third&#34;</span><span class="o">)</span>

<span class="c1"># 修改数组值</span>
arr<span class="o">[</span>0<span class="o">]=</span><span class="s1">&#39;No.1&#39;</span>

<span class="c1"># 增加值</span>
arr<span class="o">[</span>3<span class="o">]=</span><span class="s1">&#39;fourth&#39;</span>

<span class="c1"># 获取数组所有值</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[@]</span><span class="si">}</span>
<span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[*]</span><span class="si">}</span>

<span class="c1"># 获取数组长度</span>
<span class="nb">echo</span> <span class="si">${#</span><span class="nv">arr</span><span class="p">[@]</span><span class="si">}</span>

<span class="c1"># 打印所有下标(索引)，从 0 开始</span>
<span class="nb">echo</span> <span class="si">${</span><span class="p">!arr[@]</span><span class="si">}</span>

<span class="c1"># for 遍历数组，这个方法有时达不到理想效果, 参考 for 循环的坑</span>
<span class="k">for</span> a in <span class="si">${</span><span class="nv">arr</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$a</span>
<span class="k">done</span>

<span class="c1"># for 通过下标遍历数组, 推荐使用这个方式</span>
<span class="k">for</span> i in <span class="si">${</span><span class="p">!arr[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="si">${</span><span class="nv">arr</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>for 循环遍历数组的坑</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nv">string</span><span class="o">=(</span>
<span class="s2">&#34;this is first line&#34;</span>
<span class="s2">&#34;this is second line&#34;</span>
<span class="s2">&#34;this is third line&#34;</span>
<span class="o">)</span>

<span class="k">for</span> line in <span class="si">${</span><span class="nv">string</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span> <span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$line</span>
    sleep 0.5
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>运行以上脚本你就会知道坑在哪里了</p>
</blockquote>
<h2 id="条件判断语句">条件判断语句</h2>
<h3 id="1-使用-test-和---进行条件判断">1. 使用 <code>test</code> 和 <code>[ ]</code> 进行条件判断</h3>
<p><code>test</code> 与 <code>[ ]</code> 是对等的功能一致。</p>
<p><strong>test</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># test -f /etc/passwd &amp;&amp; echo yes</span>
yes
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># test -d /etc/ &amp;&amp; echo yes</span>
yes
</code></pre></td></tr></table>
</div>
</div><p><strong>将test 替换为 [ ]</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># [ -f /etc/passwd ] &amp;&amp; echo yes</span>
yes
<span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># [ -d /etc ] &amp;&amp; echo yes</span>
yes
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><em>Tips:</em> <code>[]</code> 与其中的命令两边必须得空格隔开才行，否则会报错</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="o">[</span>root@localhost ~<span class="o">]</span><span class="c1"># [-d /etc ] &amp;&amp; echo yes</span>
-bash: <span class="o">[</span>-d: <span class="nb">command</span> not found
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>以上就是没有用空格隔开导致的错误</p>
</blockquote>
<h3 id="2-if-语句条件判断">2. if 语句，条件判断</h3>
<p>在其他编程语言中，<code>if</code>语句后面的对象是一个值为<code>TRUE</code>或<code>FALSE</code>的等式。<code>bash shell</code>脚本中的<code>if</code>语句不是这样的。
<code>bash shell</code>中的<code>if</code>语句运行在<code>if</code>行定义的命令。如果命令的退出状态是<code>0</code>（成功执行命令），将执行<code>then</code>后面的所有命令。
如果命令的退出状态是<code>0</code>以外的其他值，那么<code>then</code>后面的命令将不会执行，<code>bash shell</code>会移动到脚本的下一条命令。</p>
<p><strong>单分支</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">if</span> <span class="o">[[</span> <span class="nv">$?</span> -eq <span class="m">0</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&#34;successfully&#34;</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&#34;failed&#34;</span>
<span class="k">fi</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>多分支</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nb">read</span> -p <span class="s2">&#34;please input a number:&#34;</span> num
<span class="k">if</span> <span class="o">[[</span> <span class="nv">$num</span> -le <span class="m">10</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&#34;num 小于等于 10&#34;</span>
<span class="k">elif</span> <span class="o">[[</span> <span class="nv">$num</span> -le <span class="m">20</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span> <span class="c1"># elif 可以有多个</span>
    <span class="nb">echo</span> <span class="s2">&#34;num 小于等于 20
</span><span class="s2">fi
</span></code></pre></td></tr></table>
</div>
</div><p><strong>扩展：可以直接通过命令执行状态进行判断</strong></p>
<p>示例：服务监控脚本（pptpd 服务器监控）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span><span class="nv">TIME</span><span class="o">=</span><span class="m">5</span>
<span class="k">while</span> :<span class="p">;</span> <span class="k">do</span>
    <span class="k">if</span> netstat -anptl <span class="p">|</span> grep -q <span class="s2">&#34;pptpd&#34;</span> <span class="c1"># -q 不显示任何内容，此处只是判断不需要显示</span>
    <span class="k">then</span>
            <span class="nb">echo</span> <span class="s2">&#34;</span><span class="k">$(</span>date +%Y-%m-%d<span class="s1">&#39; &#39;</span>%H:%M:%S<span class="k">)</span><span class="s2"> pptpd is runing...&#34;</span> &gt; /tmp/pptpd.log
    <span class="k">else</span>
            /etc/init.d/pptpd restart-kill
            /etc/init.d/pptpd start
    <span class="k">fi</span>
    sleep <span class="nv">$TIME</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-case-语句">3. case 语句</h3>
<p>上面提到的『 if &hellip;. then &hellip;. fi 』对于变量的判断是以『比对』的方式来分辨的， 如果符合状态就进行某些行为，并且透过较多层次 (就是 elif &hellip;) 的方式来进行多个变量的程序码编写。 好，那么万一我有多个既定的变量内容，我所需要的变量就是 &ldquo;hello&rdquo; 及空字串两个， 那么我只要针对这两个变量来配置状况就好了，对吧？那么可以使用什么方式来设计呢？呵呵～就用 case &hellip; in &hellip;. esac 吧～，他的语法如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">case</span> $变量名 in 
   <span class="s2">&#34;第一个变量值&#34;</span><span class="o">)</span> <span class="c1"># 每个变量内容建议用双引号括起来，关键字则为小括号</span>
       <span class="nb">echo</span> <span class="s1">&#39;first&#39;</span>
       <span class="p">;;</span> <span class="c1"># 每项最后用两个分号表示结束。</span>
   <span class="s2">&#34;第二个变量值&#34;</span><span class="o">)</span>
       <span class="nb">echo</span> <span class="err">&#39;</span>second<span class="s2">&#34;
</span><span class="s2">       ;;
</span><span class="s2">   *) # 最一个变量用星号来表示所有其他值
</span><span class="s2">    echo &#34;</span>default<span class="s2">&#34;
</span><span class="s2">    ;;
</span><span class="s2">esac
</span></code></pre></td></tr></table>
</div>
</div><p><strong>示例</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="cp">#!/bin/bash
</span><span class="cp"></span>clear
cat <span class="s">&lt;&lt; EOF
</span><span class="s">        Sys Admin Menu
</span><span class="s">    1. Display disk space
</span><span class="s">    2. Display memory usage
</span><span class="s">    0. Exit menu
</span><span class="s">EOF</span>
<span class="nb">read</span> -n <span class="m">1</span> -p <span class="s2">&#34;Enter option:&#34;</span> option

<span class="k">case</span> <span class="nv">$option</span> in 
    1<span class="o">)</span>
        df -hT
        <span class="p">;;</span>
    2<span class="o">)</span>
        free -m
        <span class="p">;;</span>
    0<span class="o">)</span>
        <span class="nb">exit</span> <span class="m">0</span>
        <span class="p">;;</span>
    *<span class="o">)</span>
       <span class="nb">echo</span> <span class="s2">&#34;Warning: wrong choice, please re-select.&#34;</span>
<span class="k">esac</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="循环语句">循环语句</h2>
<h3 id="1-for-循环">1. <code>for</code> 循环</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 1. 循环一个列表</span>
<span class="k">for</span> shname in <span class="k">$(</span>ls *.sh<span class="k">)</span>
<span class="k">do</span>
   <span class="nv">name</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&#34;</span><span class="nv">$shname</span><span class="s2">&#34;</span> <span class="p">|</span> awk -F. <span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
   <span class="nb">echo</span> <span class="nv">$name</span>
<span class="k">done</span>

<span class="c1"># 2. 指定循环次数 （有点像C语法，但记得双括号）</span>
<span class="k">for</span> <span class="o">((</span> <span class="nv">i</span><span class="o">=</span>0<span class="p">;</span>i&lt;10<span class="p">;</span>i++<span class="o">))</span> <span class="o">{</span>
   <span class="nb">echo</span> <span class="nv">$i</span>
<span class="o">}</span>

<span class="c1"># 3. 等价于2</span>
<span class="k">for</span> i in <span class="k">$(</span>seq <span class="m">1</span> 10<span class="k">)</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$i</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-while-循环">2. <code>while</code> 循环</h3>
<p><code>while</code> 循环，只有结果为真时（在linux退出状态为0）才会执行，直接结果为假时才终止循环。为真时执行，用true作为循环条件可以无限循环。</p>
<p><strong>简单语法演示</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">while</span> :
<span class="k">do</span>
   date +%F
   sleep <span class="m">2</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><em>Tips:</em> 在linux中<code>:</code>表示真，可以替代<code>true</code>,以上示例是个死循环，需要添加终止条件。</p>
</blockquote>
<p><strong>示例 1</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">min</span><span class="o">=</span><span class="m">1</span>
<span class="nv">max</span><span class="o">=</span><span class="m">100</span>
<span class="k">while</span> <span class="o">[</span> <span class="nv">$min</span> -le <span class="nv">$max</span> <span class="o">]</span>
<span class="k">do</span>
    <span class="nb">echo</span> <span class="nv">$min</span>
    <span class="nv">min</span><span class="o">=</span><span class="sb">`</span>expr <span class="nv">$min</span> + 1<span class="sb">`</span>
<span class="k">done</span> 
</code></pre></td></tr></table>
</div>
</div><p><strong>示例 2 双括号形式，内部结构有点像C的语法，注意赋值：i=$(($i+1))</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">i</span><span class="o">=</span><span class="m">1</span>
<span class="k">while</span><span class="o">((</span><span class="nv">$i</span>&lt;100<span class="o">))</span>
<span class="k">do</span>
    <span class="k">if</span><span class="o">((</span><span class="nv">$i</span>%4<span class="o">==</span>0<span class="o">))</span>
    <span class="k">then</span>
        <span class="nb">echo</span> <span class="nv">$i</span>
    <span class="k">fi</span>
    <span class="nv">i</span><span class="o">=</span><span class="k">$((</span><span class="nv">$i</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-until-循环">3. <code>until</code> 循环</h3>
<p>直到给定的结果为真时，停止循环。刚好与<code>while</code>循环相反。（貌似不常用）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="nv">x</span><span class="o">=</span><span class="m">0</span>
<span class="k">until</span> <span class="o">[</span> <span class="nv">$x</span> -eq <span class="m">9</span> <span class="o">]</span><span class="p">;</span>
<span class="k">do</span>
    <span class="nb">let</span> x++<span class="p">;</span>
    <span class="nb">echo</span> <span class="nv">$x</span><span class="p">;</span>
<span class="k">done</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="4-生成连续的数字字母列表序列">4. 生成连续的数字，字母列表（序列）</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 打印1到100的数字</span>
<span class="nb">echo</span> <span class="o">{</span>1..100<span class="o">}</span>
seq <span class="m">100</span>
 
<span class="c1"># 打印小写所有字母</span>
<span class="nb">echo</span> <span class="o">{</span>a..z<span class="o">}</span>
 
<span class="c1"># 打印大写所有字母</span>
<span class="nb">echo</span> <span class="o">{</span>A..Z<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="5-循环控制语句">5. 循环控制语句</h3>
<ul>
<li><code>break</code> 命令不执行当前循环体内break下面的语句从当前循环退出.</li>
<li><code>continue</code> 命令是程序在本循体内忽略下面的语句,从循环头开始执行</li>
</ul>
<h2 id="函数">函数</h2>
<p><em>定义函数的两种方法</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="k">function</span> f1 <span class="o">{</span>
    <span class="nb">echo</span> <span class="s1">&#39;this is f1&#39;</span>
<span class="o">}</span>

f2<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s1">&#39;this is f2&#39;</span>
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p><em>函数的调用与传值</em></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">hello<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&#34;hello </span><span class="si">${</span><span class="nv">1</span><span class="si">}</span><span class="s2">!&#34;</span>
<span class="o">}</span>

<span class="c1"># 调用函数并传传递参数</span>
hello <span class="nv">$1</span>
</code></pre></td></tr></table>
</div>
</div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2021-06-13</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/bash-basice/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础" data-hashtags="bash"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://liwanggui.com/posts/bash-basice/" data-hashtag="bash"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 WhatsApp" data-sharer="whatsapp" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Myspace" data-sharer="myspace" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础" data-description=""><i data-svg-src="/lib/simple-icons/icons/myspace.min.svg"></i></a><a href="javascript:void(0);" title="分享到 Blogger" data-sharer="blogger" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础" data-description=""><i class="fab fa-blogger fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="https://liwanggui.com/posts/bash-basice/" data-title="Bash 基础"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/bash/">bash</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/ssh-key/" class="prev" rel="prev" title="SSH 密钥对的使用过程"><i class="fas fa-angle-left fa-fw"></i>SSH 密钥对的使用过程</a>
            <a href="/posts/linux-multi-ip/" class="next" rel="next" title="Linux 多 ip 源进源出">Linux 多 ip 源进源出<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="gitalk" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://github.com/gitalk/gitalk"></a>Gitalk</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.80.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2017 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/about/" target="_blank">李王贵</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="https://beian.miit.gov.cn" target="_blank">粤ICP备17058610号</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/gitalk/gitalk.min.js"></script><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"gitalk":{"admin":["liwanggui"],"clientID":"b58d40d83e8ed764cd68","clientSecret":"692c18c18161da09204436725074fc7c8c218975","id":"2021-06-13T18:05:23+08:00","owner":"liwanggui","repo":"liwanggui.github.io","title":"Bash 基础"}},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
